# TODO 待办清单

- [x] 拨打5000@sip.weiyuai.cn，实现IVR测试
- [x] 在cicd文件夹创建一个脚本，首先执行 pnpm build-demo，然后使用rsa的方式 将demo文件夹所有内容 上传到 服务器14.103.165.199 目录 /var/www/html/sip_demo 中
- [x] 解释一下 注册有效期，并实现自动续期
- [x] 显示当前正在呼叫或者通话中的号码信息
- [x] 将 发起呼叫 按钮替换为 呼叫echo，并将 所有呼叫按钮 放在一行即可，并去掉后面的 目标或拨打 sip地址，因为都是相同的，只有前面的号码不同
- [x] 按顺序 增加 3000/3001/3002 加入会议 按钮
- [x] 增加支持视频通话功能，视频功能可以参考 demo-2.ts文件
	- 已在 demo-1.html 增加本地/远端视频元素，在 demo-1.ts 中启用 audio+video 约束并绑定本地/远端视频，外呼/来电均可显示视频。
- [x] 增加支持视频会议，多人视频通话功能
	- 当前通过加入会议号码 3000/3001/3002 进入服务器侧会议房间，实现多方视频；若需 Web 端本地混流/转发或自建 MCU/SFU，我可以继续扩展。
- [x] 应该在保留原先 音频通话的同时，增加视频通话按钮
- [] 界面已经增加了3000/3001/3002会议视频，是否支持一对一视频呼叫？如果可以请增加按钮
- [] 号码9200/9201/9203等用于测试音频AI机器人对话，请增加9201/9201相应按钮，并修改文案说明
- [] 将号码进行分组，使得更加清晰，方便测试

## bug

- [x] 对端号码显示不正常，一直显示为：—
	- 修复：为“呼叫 5000”按钮补充 currentPeer 与 UI 更新逻辑，并在失败分支重置状态；现所有外呼均能正确显示对端号码。

说明：
- 注册有效期（Expires）由服务器在 REGISTER 200 OK 中返回，通常在 Contact 头部的 expires 参数（或 Expires 头）。
- Demo 会解析该秒数并显示“剩余秒数/到期时间”，每秒实时倒计时。
- 通过 SimpleUserOptions.registererOptions.refreshFrequency=95，让 SIP.js 在到期前自动 re-REGISTER，保持在线。
- 注销或断开会清理倒计时与显示。
